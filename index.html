<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopper Finder</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/E-Raffle/WebResources/blser_CustomeInterfaceCss"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Find Shopper -->
    <section class="ps-2 pt-3" id="find-shopper">
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-12 col-md-12 col-lg-8 col-xl-5">
            <div class="shopper-card p-5 pt-3">
              <h1 class="title fs-5">Find a Shopper</h1>
              <div id="message" class="mt-2"></div>
              <div class="d-flex content pt-2 gap-3 align-items-center">
                <div id="phone-number">
                  <label class="fs-6" for="phoneNumber"> Phone Number </label>
                  <input
                    type="text"
                    id="phoneNumber"
                    class="form-control input-box"
                    placeholder="Enter phone number"
                  />
                </div>

                <div id="national-id">
                  <label for="nationalId"> National ID </label>
                  <input
                    type="text"
                    id="nationalId"
                    class="form-control input-box"
                    placeholder="Enter National ID"
                  />
                </div>

                <div id="shopper-submit" class="mt-4">
                  <button id="submit-find" class="main-btn">
                    <span class="main-text">Find Shoppers</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div id="shopper-not-found-message" class="mt-2"></div>
        </div>
      </div>
    </section>
    <!-- Find Shopper -->
    <!-- Shopper Not Found -->
    <section class="ps-2 pt-3 d-none" id="shopper-not-found">
      <div class="container-fluid">
        <div class="d-flex align-items-center">
          <span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              class="pb-1"
              viewBox="0 0 24 24"
            >
              <g
                id="vuesax_linear_close-circle"
                data-name="vuesax/linear/close-circle"
                transform="translate(-236 -252)"
              >
                <g id="close-circle">
                  <path
                    id="Vector"
                    d="M10,20A10,10,0,1,0,0,10,10.029,10.029,0,0,0,10,20Z"
                    transform="translate(238 254)"
                    fill="none"
                    stroke="#8b2d1a"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                  />
                  <path
                    id="Vector-2"
                    data-name="Vector"
                    d="M0,5.66,5.66,0"
                    transform="translate(245.17 261.17)"
                    fill="none"
                    stroke="#8b2d1a"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                  />
                  <path
                    id="Vector-3"
                    data-name="Vector"
                    d="M5.66,5.66,0,0"
                    transform="translate(245.17 261.17)"
                    fill="none"
                    stroke="#8b2d1a"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                  />
                  <path
                    id="Vector-4"
                    data-name="Vector"
                    d="M0,0H24V24H0Z"
                    transform="translate(236 252)"
                    fill="none"
                    opacity="0"
                  />
                </g>
              </g>
            </svg>

            <span class="fs-5">Shopper Not Found</span>
          </span>
          &nbsp;
          <a class="main-link">
            <span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 16 16"
              >
                <g
                  id="vuesax_linear_refresh-2"
                  data-name="vuesax/linear/refresh-2"
                  transform="translate(-364 -316)"
                >
                  <g id="refresh-2" transform="translate(364 316)">
                    <path
                      id="Vector"
                      d="M1.11,14.44v3.333"
                      transform="translate(0.963 -3.48)"
                      fill="none"
                      stroke="#1a8b4f"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                    />
                    <path
                      id="Vector-2"
                      data-name="Vector"
                      d="M13.333,6.667a6.669,6.669,0,0,1-6.667,6.667C2.987,13.333.74,9.627.74,9.627H3.753M0,6.667A6.652,6.652,0,0,1,6.667,0a8.2,8.2,0,0,1,6.667,3.707m0,0V.373m0,3.333h-2.96"
                      transform="translate(1.333 1.333)"
                      fill="none"
                      stroke="#1a8b4f"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                    />
                    <path
                      id="Vector-3"
                      data-name="Vector"
                      d="M0,0H16V16H0Z"
                      transform="translate(16 16) rotate(180)"
                      fill="none"
                      opacity="0"
                    />
                  </g>
                </g>
              </svg>
            </span>
            Change User
          </a>
        </div>

        <!-- Form -->
        <div class="row mt-3">
          <div class="col-sm-12 col-md-12 col-lg-8 col-xl-7">
            <div class="shopper-not-found-card">
              <h1 style="width: 100% !important" class="title fs-5">
                Register a new Shopper
              </h1>
              <!-- National Id Or Passport Checkboxes -->
              <div class="row mt-3">
                <div class="col-md-2 pb-1">
                  <div id="national-id1">
                    <span class="d-flex align-items-center">
                      <label for="nationalId1"></label>
                      <input
                        type="radio"
                        id="nationalId1"
                        name="documentType"
                        style="width: 24px !important; height: 24px !important"
                        class="form-check-input rounded-5"
                      />
                      <span style="color: #704c38 !important" class="ms-2">
                        National ID
                      </span>
                    </span>
                  </div>
                </div>
                <div class="col-md-1 pb-1">
                  <div id="passport">
                    <span class="d-flex align-items-center">
                      <label for="passport"></label>
                      <input
                        type="radio"
                        id="passport"
                        name="documentType"
                        style="width: 24px !important; height: 24px !important"
                        class="form-check-input rounded-5"
                      />
                      <span style="color: #704c38 !important" class="ms-2">
                        Passport
                      </span>
                    </span>
                  </div>
                </div>
              </div>

              <!-- National Id Or Passport Checkboxes -->
              <!-- Full Name & National ID -->
              <div class="row mt-3">
                <div class="col-md-4">
                  <div id="national-id2">
                    <label class="fs-6" for="nationalId2"> ID Naumber </label>
                    <input
                      type="text"
                      id="nationalId2"
                      class="form-control input-box"
                      placeholder="Enter National Number"
                    />
                  </div>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-md-4">
                  <div id="first-name">
                    <label class="fs-6" for="firstName"> First Name </label>
                    <input
                      type="text"
                      id="firstName"
                      class="form-control input-box"
                      placeholder="Enter First Name"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div id="last-name">
                    <label class="fs-6" for="lastName"> Last Name </label>
                    <input
                      type="text"
                      id="lastName"
                      class="form-control input-box"
                      placeholder="Enter First Name"
                    />
                  </div>
                </div>
              </div>
              <!-- Phone Number -->
              <div class="row flex-row align-items-end mt-3">
                <div class="col-md-2">
                  <!-- Dropdown to choose +20 or +966 etc .. -->
                  <div id="country-code">
                    <label class="fs-6" for="countryCode"> Country Code </label>
                    <select
                      id="countryCode"
                      class="form-select input-box"
                      aria-label="Default select example"
                    ></select>
                  </div>
                </div>

                <div class="col-md-5">
                  <!-- textbox to type the number -->
                  <div id="phone-number2">
                    <label class="fs-6" for="phoneNumber2">
                      Phone Number
                    </label>
                    <input
                      type="text"
                      id="phoneNumber2"
                      class="form-control input-box"
                      placeholder="Enter Phone Number"
                    />
                  </div>
                </div>
                <!-- Checkbox for whats app availability -->
                <!-- <div class="col-md-1 pb-1">
                                <div id="whats-app">
                                  <span class="d-flex align-items-center">
                                    <input
                                      type="checkbox"
                                      id="whatsApp"
                                      style="width: 24px !important; height: 24px !important"
                                      class="form-check-input"
                                    />
                                    <span style="color: #704c38 !important" class="ms-2">
                                      WhatsApp Available</span
                                    >
                                  </span>
                                </div>
                              </div>
                            </div> -->
                <!-- Phone Number -->
                <!-- Birthdate & Gender -->
                <div class="row align-items-center mt-3">
                  <div class="col-md-4">
                    <div id="birth-date">
                      <div
                        style="
                          flex-direction: column !important;
                          align-items: flex-start !important;
                        "
                        class="date-input-container"
                      >
                        <label for="birthDate"> Birth Day </label>
                        <input
                          type="date"
                          id="birthDate"
                          class="form-control custom-input-box"
                          placeholder="mm/dd/yyyy"
                        />
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          style="transform: translateY(-15%) !important"
                          class="custom-calendar-icon"
                        >
                          <g
                            id="vuesax_linear_calendar"
                            data-name="vuesax/linear/calendar"
                            transform="translate(-492 -188)"
                          >
                            <g id="calendar">
                              <path
                                id="Vector"
                                d="M0,0V3"
                                transform="translate(500 190)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-2"
                                data-name="Vector"
                                d="M0,0V3"
                                transform="translate(508 190)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-3"
                                data-name="Vector"
                                d="M0,0H17"
                                transform="translate(495.5 197.09)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-4"
                                data-name="Vector"
                                d="M18,5v8.5c0,3-1.5,5-5,5H5c-3.5,0-5-2-5-5V5C0,2,1.5,0,5,0h8C16.5,0,18,2,18,5Z"
                                transform="translate(495 191.5)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-5"
                                data-name="Vector"
                                d="M0,0H24V24H0Z"
                                transform="translate(492 188)"
                                fill="none"
                                opacity="0"
                              />
                              <path
                                id="Vector-6"
                                data-name="Vector"
                                d="M.495.5H.5"
                                transform="translate(507.2 201.2)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                              />
                              <path
                                id="Vector-7"
                                data-name="Vector"
                                d="M.495.5H.5"
                                transform="translate(507.2 204.2)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                              />
                              <path
                                id="Vector-8"
                                data-name="Vector"
                                d="M.495.5H.5"
                                transform="translate(503.501 201.2)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                              />
                              <path
                                id="Vector-9"
                                data-name="Vector"
                                d="M.495.5H.5"
                                transform="translate(503.501 204.2)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                              />
                              <path
                                id="Vector-10"
                                data-name="Vector"
                                d="M.495.5H.5"
                                transform="translate(499.8 201.2)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                              />
                              <path
                                id="Vector-11"
                                data-name="Vector"
                                d="M.495.5H.5"
                                transform="translate(499.8 204.2)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                              />
                            </g>
                          </g>
                        </svg>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-3">
                    <!-- drop down for male or female -->
                    <div id="gender">
                      <label class="fs-6" for="gender"> Gender </label>
                      <select
                        id="gender"
                        class="form-select input-box"
                        aria-label="Default select example"
                      >
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                      </select>
                    </div>
                  </div>
                </div>
                <!-- Birthdate & Gender -->
                <!-- Submission -->
                <div class="row mt-3 align-items-center flex-row">
                  <div class="col-md-4">
                    <button class="main-btn create-new-shopper">
                      <span>
                        <svg
                          id="vuesax_linear_add-square"
                          data-name="vuesax/linear/add-square"
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          viewBox="0 0 16 16"
                        >
                          <g id="add-square">
                            <path
                              id="Vector"
                              d="M0,0H5.333"
                              transform="translate(5.333 8)"
                              fill="none"
                              stroke="#231a3e"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="1.2"
                            />
                            <path
                              id="Vector-2"
                              data-name="Vector"
                              d="M0,5.333V0"
                              transform="translate(8 5.333)"
                              fill="none"
                              stroke="#231a3e"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="1.2"
                            />
                            <path
                              id="Vector-3"
                              data-name="Vector"
                              d="M4.667,13.333h4c3.333,0,4.667-1.333,4.667-4.667v-4C13.333,1.333,12,0,8.667,0h-4C1.333,0,0,1.333,0,4.667v4C0,12,1.333,13.333,4.667,13.333Z"
                              transform="translate(1.333 1.333)"
                              fill="none"
                              stroke="#231a3e"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="1.2"
                            />
                            <path
                              id="Vector-4"
                              data-name="Vector"
                              d="M0,0H16V16H0Z"
                              fill="none"
                              opacity="0"
                            />
                          </g>
                        </svg>
                      </span>
                      <span class="main-text">Register User</span>
                    </button>
                  </div>

                  <div class="col-md-2">
                    <a class="text-dark">
                      <span>
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          viewBox="0 0 16 16"
                        >
                          <g
                            id="vuesax_linear_undo"
                            data-name="vuesax/linear/undo"
                            transform="translate(-108 -316)"
                          >
                            <g id="undo" transform="translate(108 316)">
                              <path
                                id="Vector"
                                d="M2,6.667H7.333A3.333,3.333,0,0,0,7.333,0H0"
                                transform="translate(2.753 5.54)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-2"
                                data-name="Vector"
                                d="M1.707,3.413,0,1.707,1.707,0"
                                transform="translate(2.58 3.793)"
                                fill="none"
                                stroke="#0f172a"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-3"
                                data-name="Vector"
                                d="M0,0H16V16H0Z"
                                transform="translate(16 16) rotate(180)"
                                fill="none"
                                opacity="0"
                              />
                            </g>
                          </g>
                        </svg>
                      </span>
                      Back to Search Results
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Shopper Not Found -->
    <!-- Shopper Details -->
    <section id="shopper-details" class="d-none ps-2 pt-3">
      <div class="container-fluid">
        <div class="d-flex gap-2 align-items-baseline">
          <h1 class="title">
            <span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24.457"
                height="24.457"
                viewBox="0 0 24.457 24.457"
              >
                <g
                  id="Group_127"
                  data-name="Group 127"
                  transform="translate(0.75 0.75)"
                >
                  <path
                    id="Vector"
                    d="M11.478,22.957A11.478,11.478,0,1,0,0,11.478,11.512,11.512,0,0,0,11.478,22.957Z"
                    transform="translate(0 0)"
                    fill="none"
                    stroke="#1a8b4f"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                  />
                  <path
                    id="Vector-2"
                    data-name="Vector"
                    d="M0,3.248,3.248,6.5,9.757,0"
                    transform="translate(6.6 8.23)"
                    fill="none"
                    stroke="#1a8b4f"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                  />
                </g>
              </svg> </span
            >Shopper Found
          </h1>
          <a class="main-link" style="cursor: pointer" id="changeUserBtn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 16 16"
            >
              <g
                id="vuesax_linear_refresh-2"
                data-name="vuesax/linear/refresh-2"
                transform="translate(-364 -316)"
              >
                <g id="refresh-2" transform="translate(364 316)">
                  <path
                    id="Vector"
                    d="M1.11,14.44v3.333"
                    transform="translate(0.963 -3.48)"
                    fill="none"
                    stroke="#1a8b4f"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                  />
                  <path
                    id="Vector-2"
                    data-name="Vector"
                    d="M13.333,6.667a6.669,6.669,0,0,1-6.667,6.667C2.987,13.333.74,9.627.74,9.627H3.753M0,6.667A6.652,6.652,0,0,1,6.667,0a8.2,8.2,0,0,1,6.667,3.707m0,0V.373m0,3.333h-2.96"
                    transform="translate(1.333 1.333)"
                    fill="none"
                    stroke="#1a8b4f"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                  />
                  <path
                    id="Vector-3"
                    data-name="Vector"
                    d="M0,0H16V16H0Z"
                    transform="translate(16 16) rotate(180)"
                    fill="none"
                    opacity="0"
                  />
                </g>
              </g>
            </svg>
            Change User
          </a>
        </div>

        <div class="row">
          <div class="col-md-10">
            <!-- DataTable Element -->
            <table id="shopperTable" class="display w-100">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Phone Number</th>
                  <th>ID Number</th>
                  <th>Birthdate</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <span>
              <svg
                id="info-circle"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="27"
                viewBox="0 0 24 27"
              >
                <path
                  id="Vector"
                  d="M10,23c5.5,0,10-5.175,10-11.5S15.5,0,10,0,0,5.175,0,11.5,4.5,23,10,23Z"
                  transform="translate(2 2)"
                  fill="none"
                  stroke="#c77b30"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                />
                <path
                  id="Vector-2"
                  data-name="Vector"
                  d="M0,0V5"
                  transform="translate(12 9.263)"
                  fill="none"
                  stroke="#c77b30"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                />
                <path
                  id="Vector-3"
                  data-name="Vector"
                  d="M0,0H.009"
                  transform="translate(11.995 18)"
                  fill="none"
                  stroke="#c77b30"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                />
                <path
                  id="Vector-4"
                  data-name="Vector"
                  d="M0,0H24V27H0Z"
                  fill="none"
                  opacity="0"
                />
              </svg>
              Haven't found who you were looking for ?
            </span>
            &nbsp;
            <a class="main-link" id="register-new-shopper">
              <span>
                <svg
                  id="vuesax_linear_add-square"
                  data-name="vuesax/linear/add-square"
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                >
                  <g id="add-square">
                    <path
                      id="Vector"
                      d="M0,0H5.333"
                      transform="translate(5.333 8)"
                      fill="none"
                      stroke="#231a3e"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.2"
                    />
                    <path
                      id="Vector-2"
                      data-name="Vector"
                      d="M0,5.333V0"
                      transform="translate(8 5.333)"
                      fill="none"
                      stroke="#231a3e"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.2"
                    />
                    <path
                      id="Vector-3"
                      data-name="Vector"
                      d="M4.667,13.333h4c3.333,0,4.667-1.333,4.667-4.667v-4C13.333,1.333,12,0,8.667,0h-4C1.333,0,0,1.333,0,4.667v4C0,12,1.333,13.333,4.667,13.333Z"
                      transform="translate(1.333 1.333)"
                      fill="none"
                      stroke="#231a3e"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.2"
                    />
                    <path
                      id="Vector-4"
                      data-name="Vector"
                      d="M0,0H16V16H0Z"
                      fill="none"
                      opacity="0"
                    />
                  </g>
                </svg>
              </span>
              Register New Shopper
            </a>
          </div>
        </div>
      </div>
    </section>
    <!-- Shopper Details -->
    <!-- Shopper Profile -->
    <section id="shopper-profile" class="ps-2 pt-3 d-none">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12">
            <div class="row align-items-center gap-0">
              <div class="col-sm-4 col-md-1">
                <h5 class="title fs-5">Shopper Profile</h5>
              </div>
              <div class="col-sm-4 col-md-1 ms-2">
                <h5 class="title fs-5 shopperName">Loading...</h5>
              </div>
              <div class="col-sm-4 col-md-1">
                <a
                  class="main-link"
                  id="change-user-btn-1"
                  style="cursor: pointer"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 16 16"
                  >
                    <g
                      id="vuesax_linear_refresh-2"
                      data-name="vuesax/linear/refresh-2"
                      transform="translate(-364 -316)"
                    >
                      <g id="refresh-2" transform="translate(364 316)">
                        <path
                          id="Vector"
                          d="M1.11,14.44v3.333"
                          transform="translate(0.963 -3.48)"
                          fill="none"
                          stroke="#1a8b4f"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                        />
                        <path
                          id="Vector-2"
                          data-name="Vector"
                          d="M13.333,6.667a6.669,6.669,0,0,1-6.667,6.667C2.987,13.333.74,9.627.74,9.627H3.753M0,6.667A6.652,6.652,0,0,1,6.667,0a8.2,8.2,0,0,1,6.667,3.707m0,0V.373m0,3.333h-2.96"
                          transform="translate(1.333 1.333)"
                          fill="none"
                          stroke="#1a8b4f"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                        />
                        <path
                          id="Vector-3"
                          data-name="Vector"
                          d="M0,0H16V16H0Z"
                          transform="translate(16 16) rotate(180)"
                          fill="none"
                          opacity="0"
                        />
                      </g>
                    </g>
                  </svg>
                  Change User
                </a>
              </div>
            </div>
            <div style="height: 140px !important" class="row mt-4 gap-3">
              <div class="col-md-4 shopper-profile">
                <div class="row align-items-center">
                  <div class="col-md-4">
                    <div class="d-flex flex-column">
                      <br />
                      <div>
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="30"
                          height="30"
                          viewBox="0 0 30 30"
                        >
                          <g
                            id="vuesax_linear_user-square"
                            data-name="vuesax/linear/user-square"
                            transform="translate(-748 -188)"
                          >
                            <g id="user-square">
                              <path
                                id="Vector"
                                d="M12.28,4.65a11.152,11.152,0,0,1-3.14.38h-6A11.152,11.152,0,0,1,0,4.65C.22,2.05,2.89,0,6.14,0S12.06,2.05,12.28,4.65Z"
                                transform="translate(753.86 204.97)"
                                fill="none"
                                stroke="#221e2e"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-2"
                                data-name="Vector"
                                d="M13,0H7C2,0,0,2,0,7v6c0,3.78,1.14,5.85,3.86,6.62.22-2.6,2.89-4.65,6.14-4.65s5.92,2.05,6.14,4.65C18.86,18.85,20,16.78,20,13V7C20,2,18,0,13,0ZM10,12.17a3.585,3.585,0,1,1,3.58-3.59A3.585,3.585,0,0,1,10,12.17Z"
                                transform="translate(750 190)"
                                fill="none"
                                stroke="#221e2e"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-3"
                                data-name="Vector"
                                d="M7.16,3.58A3.58,3.58,0,1,1,3.58,0,3.585,3.585,0,0,1,7.16,3.58Z"
                                transform="translate(756.42 195)"
                                fill="none"
                                stroke="#221e2e"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1.5"
                              />
                              <path
                                id="Vector-4"
                                data-name="Vector"
                                d="M0,0H24V24H0Z"
                                transform="translate(748 188)"
                                fill="none"
                                opacity="0"
                              />
                            </g>
                          </g>
                        </svg>
                      </div>
                      <div>
                        <label class="text-muted" for="fullName_profile"
                          >Full Name</label
                        >
                        <p id="fullName_profile" class="shopperName">
                          Loading...
                        </p>

                        <p class="id_Number1" id="shopperId">Loading...</p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="d-flex flex-column">
                      <div>
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="30"
                          height="30"
                          viewBox="0 0 30 30"
                        >
                          <g id="call" transform="translate(-108.5 -188.5)">
                            <g
                              id="Vector"
                              transform="translate(110 190)"
                              fill="none"
                            >
                              <path
                                d="M24,19.625a3.059,3.059,0,0,1-.3,1.31,4.959,4.959,0,0,1-.817,1.226,5.418,5.418,0,0,1-1.971,1.418,6.035,6.035,0,0,1-2.344.457,10.015,10.015,0,0,1-3.918-.877,21.109,21.109,0,0,1-4.134-2.38,34.552,34.552,0,0,1-3.942-3.365,34.148,34.148,0,0,1-3.353-3.93,21.426,21.426,0,0,1-2.356-4.1A10.122,10.122,0,0,1,0,5.456,6.217,6.217,0,0,1,.433,3.137,5.532,5.532,0,0,1,1.815,1.13,3.521,3.521,0,0,1,4.314,0a2.258,2.258,0,0,1,.973.216,1.959,1.959,0,0,1,.805.673l2.788,3.93a4.113,4.113,0,0,1,.481.841,1.9,1.9,0,0,1,.168.733,1.631,1.631,0,0,1-.252.853A4.088,4.088,0,0,1,8.6,8.1l-.913.949A.643.643,0,0,0,7.5,9.53a1.091,1.091,0,0,0,.036.276c.036.1.072.168.1.24a9.973,9.973,0,0,0,1.118,1.538c.541.625,1.118,1.262,1.743,1.9.649.637,1.274,1.226,1.911,1.767a9.224,9.224,0,0,0,1.55,1.106c.06.024.132.06.216.1a.83.83,0,0,0,.3.048.661.661,0,0,0,.493-.2l.913-.9a3.687,3.687,0,0,1,.865-.673,1.6,1.6,0,0,1,.853-.252,1.918,1.918,0,0,1,.733.156,4.648,4.648,0,0,1,.841.469l3.978,2.824a1.823,1.823,0,0,1,.661.769A2.466,2.466,0,0,1,24,19.625Z"
                                stroke="none"
                              />
                              <path
                                d="M 18.56784820556641 24.03605651855469 C 19.40911865234375 24.03605651855469 20.19027900695801 23.87981605529785 20.91136932373047 23.57936668395996 C 21.64446830749512 23.27891540527344 22.2934398651123 22.81021690368652 22.8823184967041 22.16124725341797 C 23.23084831237793 21.77666664123535 23.4952392578125 21.36805725097656 23.69954872131348 20.93540573120117 C 23.90384864807129 20.50275611877441 24 20.05808639526367 24 19.62543678283691 C 24 19.28892707824707 23.92788887023926 18.98847579956055 23.80770874023438 18.68802642822266 C 23.67550849914551 18.38757705688477 23.45918846130371 18.13520622253418 23.14671897888184 17.91887664794922 L 19.16874885559082 15.09464645385742 C 18.86829948425293 14.89033603668213 18.59188842773438 14.73409652709961 18.32748985290527 14.62593650817871 C 18.06308937072754 14.51777648925781 17.82272911071777 14.46970653533936 17.59438896179199 14.46970653533936 C 17.2939395904541 14.46970653533936 17.01752853393555 14.55382633209229 16.74110984802246 14.72208595275879 C 16.46469879150391 14.86629676818848 16.17625999450684 15.09464645385742 15.87580871582031 15.39509677886963 L 14.96243858337402 16.29644584655762 C 14.83024883270264 16.42864608764648 14.67400932312012 16.50074577331543 14.46969890594482 16.50074577331543 C 14.36153888702393 16.50074577331543 14.26539897918701 16.48873710632324 14.16924858093262 16.45267677307129 C 14.08512878417969 16.4166259765625 14.01301860809326 16.38056564331055 13.95292949676514 16.35653686523438 C 13.54431915283203 16.14020729064941 13.02753925323486 15.77966594696045 12.4025993347168 15.25087642669678 C 11.76564884185791 14.71006679534912 11.14070892333984 14.12117671966553 10.49173927307129 13.48422622680664 C 9.866799354553223 12.84726619720459 9.289929389953613 12.21031665802002 8.749118804931641 11.58537673950195 C 8.220329284667969 10.96043682098389 7.847769260406494 10.44366645812988 7.631449222564697 10.0470666885376 C 7.607409000396729 9.974956512451172 7.571359157562256 9.902856826782227 7.535298824310303 9.806706428527832 C 7.511269092559814 9.710566520690918 7.49924898147583 9.626436233520508 7.49924898147583 9.530296325683594 C 7.49924898147583 9.338006019592285 7.559339046478271 9.18177604675293 7.69153881072998 9.049576759338379 L 8.60490894317627 8.100146293640137 C 8.893339157104492 7.811716556549072 9.121679306030273 7.52328634262085 9.277918815612793 7.246866226196289 C 9.446168899536133 6.970456123352051 9.530299186706543 6.682026386260986 9.530299186706543 6.393586158752441 C 9.530299186706543 6.165246486663818 9.470209121704102 5.912866115570068 9.362038612365723 5.660486221313477 C 9.253878593444824 5.396096229553223 9.097648620605469 5.11967658996582 8.881319046020508 4.819226264953613 L 6.093139171600342 0.8893363475799561 C 5.876819133758545 0.5768663287162781 5.600399017333984 0.3605363667011261 5.287929058074951 0.2163263559341431 C 4.987479209899902 0.07210635393857956 4.650979042053223 -3.648071242423612e-06 4.314468860626221 -3.648071242423612e-06 C 3.4251389503479 -3.648071242423612e-06 2.583878993988037 0.3725563585758209 1.814719080924988 1.129696369171143 C 1.177769064903259 1.730596303939819 0.7210790514945984 2.403606414794922 0.4326490461826324 3.136706352233887 C 0.1442190408706665 3.857786417007446 -9.5367431640625e-07 4.638956546783447 -9.5367431640625e-07 5.456186294555664 C -9.5367431640625e-07 6.706056118011475 0.2884290516376495 8.016026496887207 0.8652990460395813 9.386075973510742 C 1.442169070243835 10.74411678314209 2.23534893989563 12.11416625976562 3.220829010009766 13.48422622680664 C 4.218328952789307 14.85428619384766 5.335999011993408 16.16424560546875 6.573859214782715 17.41411590576172 C 7.823739051818848 18.65197563171387 9.133699417114258 19.76965713500977 10.51576900482178 20.77916717529297 C 11.88582897186279 21.77666664123535 13.26789951324463 22.56985664367676 14.64996910095215 23.15873718261719 C 16.03204917907715 23.74761581420898 17.34200859069824 24.03605651855469 18.56784820556641 24.03605651855469 M 18.56784820556641 25.53605651855469 C 17.1312084197998 25.53605651855469 15.61521911621094 25.20049667358398 14.06198883056641 24.5386962890625 C 12.57260894775391 23.90408706665039 11.08244895935059 23.04719543457031 9.632879257202148 21.99180603027344 C 8.194998741149902 20.94153594970703 6.811298847198486 19.76041603088379 5.518339157104492 18.47988700866699 L 5.508089065551758 18.46964645385742 C 4.222959041595459 17.17204666137695 3.045418977737427 15.79175662994385 2.008188962936401 14.36711597442627 L 2.003118991851807 14.36011600494385 C 0.9421790242195129 12.88514614105225 0.0948590487241745 11.40894603729248 -0.5153109431266785 9.972536087036133 C -1.169320940971375 8.419276237487793 -1.500000953674316 6.90122652053833 -1.500000953674316 5.456186294555664 C -1.500000953674316 4.444301128387451 -1.318783521652222 3.477616310119629 -0.9613381028175354 2.582798004150391 C -0.5896997451782227 1.640286684036255 -0.005902489181607962 0.7880317568778992 0.7740328907966614 0.04934173077344894 C 1.808826446533203 -0.9643151760101318 3.032748937606812 -1.500003695487976 4.314468860626221 -1.500003695487976 C 4.875968933105469 -1.500003695487976 5.433314800262451 -1.375794887542725 5.926984310150146 -1.140759944915771 C 6.496897220611572 -0.8756040930747986 6.965852737426758 -0.4824873805046082 7.321135997772217 0.02789787016808987 L 10.10166263580322 3.947001218795776 C 10.38006591796875 4.334225654602051 10.590895652771 4.705527305603027 10.74584102630615 5.081534862518311 C 10.93459606170654 5.525778770446777 11.03029918670654 5.967160224914551 11.03029918670654 6.393586158752441 C 11.03029918670654 6.947810649871826 10.87197208404541 7.504541397094727 10.57217979431152 8.005315780639648 C 10.35291290283203 8.388158798217773 10.05164241790771 8.773134231567383 9.676361083984375 9.149991035461426 L 9.167242050170898 9.679210662841797 C 9.317717552185059 9.899208068847656 9.546158790588379 10.20476150512695 9.888684272766113 10.60994529724121 C 10.46814155578613 11.27932739257812 11.01256465911865 11.87278079986572 11.55244159698486 12.42351150512695 C 12.27413463592529 13.13155269622803 12.83610057830811 13.65119457244873 13.37344932556152 14.10743618011475 C 13.77272891998291 14.44528961181641 14.08281803131104 14.67355060577393 14.3157844543457 14.82718658447266 L 14.81857395172119 14.33101367950439 C 15.22354888916016 13.92652893066406 15.61167812347412 13.62656688690186 16.00357627868652 13.41538143157959 C 16.50492095947266 13.1196117401123 17.03985977172852 12.96970653533936 17.59438896179199 12.96970653533936 C 18.02313995361328 12.96970653533936 18.46086883544922 13.05984592437744 18.89541816711426 13.23760604858398 C 19.25004959106445 13.38267612457275 19.61535835266113 13.58438682556152 20.01222991943359 13.85426616668701 L 20.037109375 13.87155628204346 L 24.00852203369141 16.69112968444824 C 24.54347038269043 17.06341171264648 24.93782615661621 17.53196907043457 25.18067932128906 18.08390617370605 L 25.20042991638184 18.13093566894531 C 25.40200996398926 18.63489723205566 25.5 19.12375640869141 25.5 19.62543678283691 C 25.5 20.29565620422363 25.35058975219727 20.9518871307373 25.05592918395996 21.57589721679688 C 24.7768383026123 22.16690635681152 24.42941856384277 22.68785667419434 23.99378967285156 23.16853713989258 C 23.25798416137695 23.97942733764648 22.41411018371582 24.5837230682373 21.4848461151123 24.96541976928711 C 20.57477951049805 25.34405326843262 19.59334373474121 25.53605651855469 18.56784820556641 25.53605651855469 Z"
                                stroke="none"
                                fill="#221e2e"
                              />
                            </g>
                          </g>
                        </svg>
                      </div>
                      <div>
                        <label class="text-muted" for="mobile_Number"
                          >Mobile Number</label
                        >
                        <p id="mobile_Number">Loading...</p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="d-flex flex-column">
                      <div>
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="30"
                          height="30"
                          viewBox="0 0 30 30"
                        >
                          <g
                            id="Group_164"
                            data-name="Group 164"
                            transform="translate(-109.5 -254.828)"
                          >
                            <g
                              id="Vector"
                              transform="translate(111 256.424)"
                              fill="none"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                            >
                              <path
                                d="M6.667.011C2.227.251,0,1.9,0,7.984v8c0,5.333,1.333,8,8,8h8c6.667,0,8-2.667,8-8v-8C24,1.891,21.773.251,17.333.011S6.667.011,6.667.011Z"
                                stroke="none"
                              />
                              <path
                                d="M 12.59457778930664 -0.09600067138671875 C 9.433961868286133 -0.09600639343261719 6.66667366027832 0.0106658935546875 6.66667366027832 0.0106658935546875 C 2.226663589477539 0.2506656646728516 3.814697265625e-06 1.903997421264648 3.814697265625e-06 7.984006881713867 L 3.814697265625e-06 15.98400688171387 C 3.814697265625e-06 21.31733703613281 1.333333969116211 23.98400688171387 8.000003814697266 23.98400688171387 L 16.00000381469727 23.98400688171387 C 22.66667366027832 23.98400688171387 24.00000381469727 21.31733703613281 24.00000381469727 15.98400688171387 L 24.00000381469727 7.984006881713867 C 24.00000381469727 1.890666961669922 21.77334403991699 0.2506656646728516 17.33334350585938 0.0106658935546875 C 15.85343456268311 -0.06932830810546875 14.1747407913208 -0.09599685668945312 12.59457778930664 -0.09600067138671875 M 12.59457397460938 -1.596002578735352 L 12.59458351135254 -1.596002578735352 C 14.45672416687012 -1.595993041992188 16.07831382751465 -1.559364318847656 17.41431427001953 -1.487142562866211 C 19.33432388305664 -1.383363723754883 21.75355339050293 -1.031454086303711 23.43276405334473 0.7837066650390625 C 24.84312438964844 2.308256149291992 25.50000381469727 4.596197128295898 25.50000381469727 7.984006881713867 L 25.50000381469727 15.98400688171387 C 25.50000381469727 18.38195610046387 25.27769470214844 21.08738708496094 23.62887382507324 22.97176742553711 C 22.12915420532227 24.68572616577148 19.70503425598145 25.48400688171387 16.00000381469727 25.48400688171387 L 8.000003814697266 25.48400688171387 C 4.294973373413086 25.48400688171387 1.870853424072266 24.68572616577148 0.3711338043212891 22.97176742553711 C -1.277687072753906 21.08738708496094 -1.499996185302734 18.38195610046387 -1.499996185302734 15.98400688171387 L -1.499996185302734 7.984006881713867 C -1.499996185302734 4.601716995239258 -0.8433361053466797 2.315607070922852 0.5665435791015625 0.7894668579101562 C 2.24824333190918 -1.030902862548828 4.666664123535156 -1.383413314819336 6.585714340209961 -1.487142562866211 C 6.593433380126953 -1.487564086914062 6.601163864135742 -1.487922668457031 6.608894348144531 -1.488224029541016 C 6.63685417175293 -1.489294052124023 9.441534042358398 -1.596002578735352 12.59457397460938 -1.596002578735352 Z"
                                stroke="none"
                                fill="#221e2e"
                              />
                            </g>
                            <g
                              id="Group_165"
                              data-name="Group 165"
                              transform="translate(-570.429 6.804)"
                            >
                              <path
                                id="Vector-2"
                                data-name="Vector"
                                d="M1.459,0,0,13.128"
                                transform="translate(690.511 255)"
                                fill="none"
                                stroke="#221e2e"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1"
                              />
                              <path
                                id="Vector-3"
                                data-name="Vector"
                                d="M1.459,0,0,13.128"
                                transform="translate(694.887 255)"
                                fill="none"
                                stroke="#221e2e"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1"
                              />
                              <path
                                id="Vector-4"
                                data-name="Vector"
                                d="M0,0H13.128"
                                transform="translate(687.229 259.376)"
                                fill="none"
                                stroke="#221e2e"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1"
                              />
                              <path
                                id="Vector-5"
                                data-name="Vector"
                                d="M0,0H13.128"
                                transform="translate(686.5 263.752)"
                                fill="none"
                                stroke="#221e2e"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="1"
                              />
                            </g>
                          </g>
                        </svg>
                      </div>
                      <div>
                        <label class="text-muted" for="id_Number2"
                          >ID Number</label
                        >
                        <p id="id_Number2">Loading...</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-2 shopper-profile d-flex align-items-center">
                <div class="row justify-content-center w-100">
                  <div class="col-md-6">
                    <div class="d-flex flex-column">
                      <div>
                        <svg
                          id="unisex-symbol-color-icon"
                          xmlns="http://www.w3.org/2000/svg"
                          width="24.477"
                          height="24"
                          viewBox="0 0 24.477 24"
                        >
                          <path
                            id="Path_40134"
                            data-name="Path 40134"
                            d="M159.348,4.489a6.3,6.3,0,0,1,3.835,1.294l3.961-3.961h-1.468a.911.911,0,1,1,0-1.821h3.595a.911.911,0,0,1,.911.911V4.617a.911.911,0,1,1-1.821,0V3.23l-3.882,3.882a6.33,6.33,0,0,1-8.092,9.3A7.074,7.074,0,0,0,157.77,15a4.469,4.469,0,1,0-2.526-2.406,3.757,3.757,0,0,1-1.383,1.376,6.33,6.33,0,0,1,5.487-9.484Z"
                            transform="translate(-145.705)"
                            fill="#221e2e"
                          />
                          <path
                            id="Path_40135"
                            data-name="Path 40135"
                            d="M6.343,92.55a6.317,6.317,0,0,1,2.974.739,7.1,7.1,0,0,0-.708.62,7.028,7.028,0,0,0-.681.79,4.48,4.48,0,1,0,2.525,2.4,3.727,3.727,0,0,1,.588-.764,3.684,3.684,0,0,1,.8-.608,6.345,6.345,0,0,1-4.588,9.441v1.585H9.892a.911.911,0,0,1,0,1.821H7.254v2.638a.911.911,0,1,1-1.821,0v-2.638H2.794a.911.911,0,1,1,0-1.821H5.432v-1.585A6.343,6.343,0,0,1,6.343,92.55Z"
                            transform="translate(0 -88.126)"
                            fill="#221e2e"
                          />
                        </svg>
                      </div>
                      <div>
                        <label for="gender_Profile">Gender</label>
                        <p class="text-muted" id="gender_Profile">Loading...</p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                      >
                        <g
                          id="vuesax_linear_calendar"
                          data-name="vuesax/linear/calendar"
                          transform="translate(-492 -188)"
                        >
                          <g id="calendar">
                            <path
                              id="Vector"
                              d="M0,0V3"
                              transform="translate(500 190)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="1.5"
                            />
                            <path
                              id="Vector-2"
                              data-name="Vector"
                              d="M0,0V3"
                              transform="translate(508 190)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="1.5"
                            />
                            <path
                              id="Vector-3"
                              data-name="Vector"
                              d="M0,0H17"
                              transform="translate(495.5 197.09)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="1.5"
                            />
                            <path
                              id="Vector-4"
                              data-name="Vector"
                              d="M18,5v8.5c0,3-1.5,5-5,5H5c-3.5,0-5-2-5-5V5C0,2,1.5,0,5,0h8C16.5,0,18,2,18,5Z"
                              transform="translate(495 191.5)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="1.5"
                            />
                            <path
                              id="Vector-5"
                              data-name="Vector"
                              d="M0,0H24V24H0Z"
                              transform="translate(492 188)"
                              fill="none"
                              opacity="0"
                            />
                            <path
                              id="Vector-6"
                              data-name="Vector"
                              d="M.495.5H.5"
                              transform="translate(507.2 201.2)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                            />
                            <path
                              id="Vector-7"
                              data-name="Vector"
                              d="M.495.5H.5"
                              transform="translate(507.2 204.2)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                            />
                            <path
                              id="Vector-8"
                              data-name="Vector"
                              d="M.495.5H.5"
                              transform="translate(503.501 201.2)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                            />
                            <path
                              id="Vector-9"
                              data-name="Vector"
                              d="M.495.5H.5"
                              transform="translate(503.501 204.2)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                            />
                            <path
                              id="Vector-10"
                              data-name="Vector"
                              d="M.495.5H.5"
                              transform="translate(499.8 201.2)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                            />
                            <path
                              id="Vector-11"
                              data-name="Vector"
                              d="M.495.5H.5"
                              transform="translate(499.8 204.2)"
                              fill="none"
                              stroke="#0f172a"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                            />
                          </g>
                        </g>
                      </svg>
                    </div>
                    <div>
                      <label for="birthDate_Profile">Birthdate</label>
                      <p class="text-muted" id="birthDate_Profile">
                        Loading...
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="row mt-5">
              <div class="col-md-4">
                <h1 style="width: 100% !important" class="title fs-5">
                  Previous Invoices
                </h1>

                <button
                  id="submit"
                  style="width: 180px !important"
                  class="main-btn invoice-submit-btn2"
                >
                  <span class="main-text shopper-profile-create-invoice">
                    <svg
                      id="vuesax_linear_add-square"
                      data-name="vuesax/linear/add-square"
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                    >
                      <g id="add-square">
                        <path
                          id="Vector"
                          d="M0,0H5.333"
                          transform="translate(5.333 8)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-2"
                          data-name="Vector"
                          d="M0,5.333V0"
                          transform="translate(8 5.333)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-3"
                          data-name="Vector"
                          d="M4.667,13.333h4c3.333,0,4.667-1.333,4.667-4.667v-4C13.333,1.333,12,0,8.667,0h-4C1.333,0,0,1.333,0,4.667v4C0,12,1.333,13.333,4.667,13.333Z"
                          transform="translate(1.333 1.333)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-4"
                          data-name="Vector"
                          d="M0,0H16V16H0Z"
                          fill="none"
                          opacity="0"
                        />
                      </g>
                    </svg>
                    New Invoice
                  </span>
                </button>

                <!-- DataTable Element -->
                <table id="inVoicesTable" class="display w-100">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Invoice No</th>
                      <th>Store</th>
                      <th>Value</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>

                <!-- DataTable Element -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Shopper Profile -->
    <!-- New Invoice -->
    <section id="new-invoice" class="d-none ps-2 pt-3">
      <div class="container-fluid">
        <div class="row flex-row">
          <div class="col-sm-12 col-md-12 col-lg-8 col-xl-6">
            <div class="row align-items-center gap-0">
              <div class="col-sm-4 col-md-3">
                <h5 class="title fs-5">New Invoice for</h5>
              </div>
              <div class="col-sm-4 col-md-2 ps-0">
                <h5 class="title fs-5 shopper-name-new-invoice">...</h5>
              </div>
              <div class="col-sm-4 col-md-2">
                <a class="main-link change-user-btn" style="cursor: pointer">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 16 16"
                  >
                    <g
                      id="vuesax_linear_refresh-2"
                      data-name="vuesax/linear/refresh-2"
                      transform="translate(-364 -316)"
                    >
                      <g id="refresh-2" transform="translate(364 316)">
                        <path
                          id="Vector"
                          d="M1.11,14.44v3.333"
                          transform="translate(0.963 -3.48)"
                          fill="none"
                          stroke="#1a8b4f"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                        />
                        <path
                          id="Vector-2"
                          data-name="Vector"
                          d="M13.333,6.667a6.669,6.669,0,0,1-6.667,6.667C2.987,13.333.74,9.627.74,9.627H3.753M0,6.667A6.652,6.652,0,0,1,6.667,0a8.2,8.2,0,0,1,6.667,3.707m0,0V.373m0,3.333h-2.96"
                          transform="translate(1.333 1.333)"
                          fill="none"
                          stroke="#1a8b4f"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                        />
                        <path
                          id="Vector-3"
                          data-name="Vector"
                          d="M0,0H16V16H0Z"
                          transform="translate(16 16) rotate(180)"
                          fill="none"
                          opacity="0"
                        />
                      </g>
                    </g>
                  </svg>
                  Change User
                </a>
              </div>
            </div>
            <br />
            <div id="form-container" class="row form-wrapper gy-3">
              <div class="col-md-6">
                <div id="invoice-number">
                  <label for="invoiceNumber"> Invoice Number </label>
                  <input
                    type="text"
                    required
                    id="invoiceNumber"
                    class="form-control custom-input-box"
                    placeholder="#IN-5021554854"
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div id="raffle-dropdown">
                  <label for="raffle"> Raffle </label>
                  <select
                    id="raffle"
                    required
                    class="form-select custom-input-box"
                  >
                    <option selected>Choose a Raffle</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div id="mall-dropdown">
                  <label for="mall"> Mall </label>
                  <select
                    id="mall"
                    required
                    class="form-select custom-input-box"
                  >
                    <option selected>Choose a Mall</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div id="store-dropdown">
                  <label for="store">Store</label>
                  <select
                    id="store"
                    required
                    class="form-select custom-input-box"
                  >
                    <option selected value="">Choose a Store</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div id="purshase-date" class="date-picker-wrapper">
                  <label for="purshaseDate">Purchase Date</label>
                  <div class="date-input-container">
                    <input
                      type="date"
                      required
                      id="purshaseDate"
                      class="form-control custom-input-box"
                      placeholder="mm/dd/yyyy"
                    />
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      class="custom-calendar-icon"
                    >
                      <g
                        id="vuesax_linear_calendar"
                        data-name="vuesax/linear/calendar"
                        transform="translate(-492 -188)"
                      >
                        <g id="calendar">
                          <path
                            id="Vector"
                            d="M0,0V3"
                            transform="translate(500 190)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="1.5"
                          />
                          <path
                            id="Vector-2"
                            data-name="Vector"
                            d="M0,0V3"
                            transform="translate(508 190)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="1.5"
                          />
                          <path
                            id="Vector-3"
                            data-name="Vector"
                            d="M0,0H17"
                            transform="translate(495.5 197.09)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="1.5"
                          />
                          <path
                            id="Vector-4"
                            data-name="Vector"
                            d="M18,5v8.5c0,3-1.5,5-5,5H5c-3.5,0-5-2-5-5V5C0,2,1.5,0,5,0h8C16.5,0,18,2,18,5Z"
                            transform="translate(495 191.5)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="1.5"
                          />
                          <path
                            id="Vector-5"
                            data-name="Vector"
                            d="M0,0H24V24H0Z"
                            transform="translate(492 188)"
                            fill="none"
                            opacity="0"
                          />
                          <path
                            id="Vector-6"
                            data-name="Vector"
                            d="M.495.5H.5"
                            transform="translate(507.2 201.2)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                          />
                          <path
                            id="Vector-7"
                            data-name="Vector"
                            d="M.495.5H.5"
                            transform="translate(507.2 204.2)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                          />
                          <path
                            id="Vector-8"
                            data-name="Vector"
                            d="M.495.5H.5"
                            transform="translate(503.501 201.2)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                          />
                          <path
                            id="Vector-9"
                            data-name="Vector"
                            d="M.495.5H.5"
                            transform="translate(503.501 204.2)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                          />
                          <path
                            id="Vector-10"
                            data-name="Vector"
                            d="M.495.5H.5"
                            transform="translate(499.8 201.2)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                          />
                          <path
                            id="Vector-11"
                            data-name="Vector"
                            d="M.495.5H.5"
                            transform="translate(499.8 204.2)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                          />
                        </g>
                      </g>
                    </svg>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div id="invoiceValue">
                  <label for="invoicePrice"> Invoice Value </label>
                  <input
                    type="text"
                    required
                    id="invoicePrice"
                    class="form-control custom-input-box"
                    placeholder="13,512 US$"
                  />
                </div>
              </div>

              <div id="invoice-submit" class="mt-4">
                <button id="submit" class="main-btn invoice-submit-btn">
                  <span class="main-text">
                    <svg
                      id="vuesax_linear_add-square"
                      data-name="vuesax/linear/add-square"
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                    >
                      <g id="add-square">
                        <path
                          id="Vector"
                          d="M0,0H5.333"
                          transform="translate(5.333 8)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-2"
                          data-name="Vector"
                          d="M0,5.333V0"
                          transform="translate(8 5.333)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-3"
                          data-name="Vector"
                          d="M4.667,13.333h4c3.333,0,4.667-1.333,4.667-4.667v-4C13.333,1.333,12,0,8.667,0h-4C1.333,0,0,1.333,0,4.667v4C0,12,1.333,13.333,4.667,13.333Z"
                          transform="translate(1.333 1.333)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-4"
                          data-name="Vector"
                          d="M0,0H16V16H0Z"
                          fill="none"
                          opacity="0"
                        />
                      </g>
                    </svg>
                    Add Invoice
                  </span>
                </button>
              </div>
            </div>
            <div
              class="row mt-5 success-message justify-content-start align-items-center"
            >
              <div class="col-md-5 col-lg-12 col-xl-4">
                <span class="fs-5">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24.457"
                    height="24.457"
                    viewBox="0 0 24.457 24.457"
                  >
                    <g
                      id="Group_127"
                      data-name="Group 127"
                      transform="translate(0.75 0.75)"
                    >
                      <path
                        id="Vector"
                        d="M11.478,22.957A11.478,11.478,0,1,0,0,11.478,11.512,11.512,0,0,0,11.478,22.957Z"
                        transform="translate(0 0)"
                        fill="none"
                        stroke="#1a8b4f"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1.5"
                      />
                      <path
                        id="Vector-2"
                        data-name="Vector"
                        d="M0,3.248,3.248,6.5,9.757,0"
                        transform="translate(6.6 8.23)"
                        fill="none"
                        stroke="#1a8b4f"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1.5"
                      />
                    </g>
                  </svg>
                  Invoice Added Successfully
                </span>
              </div>
              <div class="col-md-4 col-lg-12 col-xl-3">
                <a class="main-link add-another-invoice">
                  <span>
                    <svg
                      id="vuesax_linear_add-square"
                      data-name="vuesax/linear/add-square"
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                    >
                      <g id="add-square">
                        <path
                          id="Vector"
                          d="M0,0H5.333"
                          transform="translate(5.333 8)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-2"
                          data-name="Vector"
                          d="M0,5.333V0"
                          transform="translate(8 5.333)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-3"
                          data-name="Vector"
                          d="M4.667,13.333h4c3.333,0,4.667-1.333,4.667-4.667v-4C13.333,1.333,12,0,8.667,0h-4C1.333,0,0,1.333,0,4.667v4C0,12,1.333,13.333,4.667,13.333Z"
                          transform="translate(1.333 1.333)"
                          fill="none"
                          stroke="#231a3e"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.2"
                        />
                        <path
                          id="Vector-4"
                          data-name="Vector"
                          d="M0,0H16V16H0Z"
                          fill="none"
                          opacity="0"
                        />
                      </g>
                    </svg>
                  </span>
                  Add another Invoice
                </a>
              </div>
              <div class="col-md-3 col-lg-12 col-xl-3">
                <a class="text-dark text-end shopper-profile-btn">
                  <span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                    >
                      <g
                        id="vuesax_linear_undo"
                        data-name="vuesax/linear/undo"
                        transform="translate(-108 -316)"
                      >
                        <g id="undo" transform="translate(108 316)">
                          <path
                            id="Vector"
                            d="M2,6.667H7.333A3.333,3.333,0,0,0,7.333,0H0"
                            transform="translate(2.753 5.54)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="1.5"
                          />
                          <path
                            id="Vector-2"
                            data-name="Vector"
                            d="M1.707,3.413,0,1.707,1.707,0"
                            transform="translate(2.58 3.793)"
                            fill="none"
                            stroke="#0f172a"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="1.5"
                          />
                          <path
                            id="Vector-3"
                            data-name="Vector"
                            d="M0,0H16V16H0Z"
                            transform="translate(16 16) rotate(180)"
                            fill="none"
                            opacity="0"
                          />
                        </g>
                      </g>
                    </svg>
                  </span>
                  Back to Shopper Profile
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- New Invoice -->

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        //   khaled Js Functions 11/2/2025

        function loadCountryCodes() {
          debugger;
          $.ajax({
            type: "GET",
            url:
              parent.Xrm.Utility.getGlobalContext().getClientUrl() +
              "/api/data/v9.1/blser_countrycodes?$select=blser_code,blser_country",
            async: true,
            headers: {
              "OData-MaxVersion": "4.0",
              "OData-Version": "4.0",
              "Content-Type": "application/json; charset=utf-8",
              Accept: "application/json",
              Prefer: "odata.include-annotations=*",
            },
            success: function (data) {
              console.log(data);
              var dropdown = $("#countryCode");
              dropdown.empty(); // Clear existing options

              // Add a default option
              dropdown.append('<option value="">Select Country Code</option>');

              // Populate the dropdown with retrieved data
              data.value.forEach(function (item) {
                var countryCode = item["blser_code"];
                var countryName = item["blser_country"];
                dropdown.append(
                  `<option value="+${countryCode}">+${countryCode} (${countryName})</option>`
                );
              });
            },
            error: function (xhr) {
              console.log("Error fetching country codes:", xhr);
            },
          });
        }
        loadCountryCodes();

        //  end khaled Js Functions 11/2/2025
        //find shopper button on click.
        $("#submit-find").click(function () {
          findShoppers();
        });
        //change User in shoppers details page
        document
          .getElementById("changeUserBtn")
          .addEventListener("click", function () {
            ShowFindShopper();
          });

        // Event listener for mall dropdown
        document.getElementById("mall").addEventListener("change", function () {
          const selectedMall = this.value; // Get selected mall ID
          console.log("Selected Mall ID:", selectedMall);

          // Fetch and populate stores based on selected mall
          getStoresByMall(selectedMall);
        });
        //register new shopper
        document
          .getElementById("register-new-shopper")
          .addEventListener("click", function () {
            registerNewShopper();
          });
        //create invoice from show profile
        $(".invoice-submit-btn2").click(function () {
          CreateNewInvoiceFromShopperProfile();
        });

        //change User in shoppers profile page
        document
          .getElementById("change-user-btn-1")
          .addEventListener("click", function () {
            ShowFindShopperFromShopperProfile();
          });
      });

      //show user profile
      $(document).on("click", ".view-profile", function (event) {
        event.preventDefault();
        let shopperId = $(this).data("id");
        showShopperProfileData(shopperId);
      });

      // Initialize DataTable
      function initializeDataTable(selector) {
        if (!$.fn.DataTable) {
          console.error("DataTable plugin is not loaded");
          return;
        }
        // Custom sorting for DD/MM/YYYY format

        $(selector).DataTable({
          paging: true,
          searching: false,
          info: true,
          responsive: true,
          ordering: true,
          // scroll
          scrollX: true,
          columnDefs: [
            { type: "date-dd-mm-yyyy", targets: 3 }, // Enable custom date sorting for "Birthdate" column (index 3)
            { orderable: false, targets: [1, 2] }, // Disable ordering for "Phone Number" (index 1) and "ID Number" (index 2)
          ],
          language: {
            search: "Filter records:",
            emptyTable: "No shoppers found",
            paginate: {
              previous: "&lt;",
              next: "&gt;",
            },
          },
        });
      }

      // Find Shopper Vars
      const submitShopperSection = document.getElementById("shopper-submit");
      const phoneNumber = document.getElementById("phoneNumber");
      const nationalId = document.getElementById("nationalId");
      const findShopperSection = document.getElementById("find-shopper");

      // Shopper Details Vars
      const shopperDetailsSection = document.getElementById("shopper-details");

      let initiateInvoicesBtns = document.querySelectorAll(".create-invoice");

      // New Invoice Vars
      const newInvoiceSection = document.getElementById("new-invoice");
      const submitInvoiceButton = document.querySelector(".invoice-submit-btn");
      const formContainer = document.querySelector("#form-container"); // Replace with your form's parent container ID
      const successMessage = document.querySelector(".success-message");
      const formFields = document.querySelectorAll(
        "#invoiceNumber, #store, #purshaseDate, #invoicePrice, #mall, #raffle"
      );
      const addAnotherInvoice = document.querySelector(".add-another-invoice");
      var shopperIdd;
      var shopperName;

      // Decrease the opacity of the form container
      // Decrease the opacity of the form container
      if (submitInvoiceButton && successMessage) {
        submitInvoiceButton.addEventListener("click", async () => {
          const errors = await createPurshaseInvoice(shopperIdd); // Call the function and get errors (if any)

          // If there are no errors, proceed with showing the success message
          if (!errors) {
            // Show the success message with smooth transition
            successMessage.classList.add("show"); // Add 'show' class to make it visible

            // Disable all form fields
            formFields.forEach((field) => {
              field.disabled = true;
            });

            if (formContainer) {
              formContainer.style.opacity = "0.5"; // Reduce opacity
              formContainer.style.pointerEvents = "none"; // Prevent interactions
            }

            // Optionally disable the submit button itself
            submitInvoiceButton.disabled = true;
          }
        });
      }

      if (addAnotherInvoice) {
        addAnotherInvoice.addEventListener("click", (event) => {
          event.preventDefault(); // Prevent default link behavior if needed

          // Hide the success message
          successMessage.classList.remove("show");

          // Reset form fields and re-enable them
          formFields.forEach((field) => {
            field.disabled = false; // Re-enable fields
            if (field.type === "select-one") {
              field.selectedIndex = 0; // Reset dropdown to default value
            } else if (field.type !== "button" && field.type !== "submit") {
              field.value = ""; // Clear other field values
            }
          });

          // Restore the form container's opacity and pointer-events
          if (formContainer) {
            formContainer.style.opacity = "1"; // Restore opacity
            formContainer.style.pointerEvents = "auto"; // Allow interactions
          }

          // Re-enable the submit button
          submitInvoiceButton.disabled = false;
        });
      }

      function showShopperProfileData(shopperId) {
        $.ajax({
          type: "GET",
          url:
            parent.Xrm.Utility.getGlobalContext().getClientUrl() +
            "/api/data/v9.1/blser_shopperses?$filter=blser_shoppersid eq " +
            shopperId,
          async: true,
          headers: {
            "OData-MaxVersion": "4.0",
            "OData-Version": "4.0",
            "Content-Type": "application/json; charset=utf-8",
            Accept: "application/json",
            Prefer: "odata.include-annotations=*",
          },
          success: function (data) {
            var shopper = data.value[0]; // Extract the first shopper object
            // Update UI with shopper details
            $(".shopperName").text(shopper.blser_fullname || "N/A");
            $("#shopperId").text(shopper.blser_idnumber || "N/A");
            $("#mobile_Number").text(shopper.blser_mobilenumber || "N/A");
            $("#id_Number2").text(shopper.blser_shoppersid || "N/A");
            var gender =
              shopper[
                "blser_gender@OData.Community.Display.V1.FormattedValue"
              ] || "Not Specified";
            $("#gender_Profile").text(gender);
            var birthdate = shopper.blser_dateofbirth
              ? new Date(shopper.blser_dateofbirth).toLocaleDateString()
              : "Not Provided";
            $("#birthDate_Profile").text(birthdate);
            getShopperInvoices(shopperId);
            showShopperProfilePage();
          },
          error: function (xhr) {
            console.error("Error fetching shopper profile:", xhr);
          },
        });
      }

      function getShopperInvoices(shopperId) {
        $.ajax({
          type: "GET",
          url:
            parent.Xrm.Utility.getGlobalContext().getClientUrl() +
            "/api/data/v9.1/blser_purchaseinvoices?$filter=_blser_shopper_value eq " +
            shopperId,
          async: true,
          headers: {
            "OData-MaxVersion": "4.0",
            "OData-Version": "4.0",
            "Content-Type": "application/json; charset=utf-8",
            Accept: "application/json",
            Prefer: "odata.include-annotations=*",
          },
          success: function (data) {
            // Destroy existing DataTable if initialized
            if ($.fn.DataTable.isDataTable("#inVoicesTable")) {
              invoiceTable.destroy();
            }

            // Clear table content before appending new data
            $("#inVoicesTable tbody").empty();

            if (data.value.length > 0) {
              // Loop through each invoice and add a row to the table
              data.value.forEach((invoice) => {
                const date = invoice.blser_dateofpurchase
                  ? new Date(invoice.blser_dateofpurchase).toLocaleDateString()
                  : "N/A"; // Format date
                const invoiceNo = invoice.blser_invoicenumber || "N/A";
                const store =
                  invoice[
                    "_blser_shoppingstore_value@OData.Community.Display.V1.FormattedValue"
                  ] || "N/A"; // Store name
                const value =
                  invoice[
                    "blser_amount_base@OData.Community.Display.V1.FormattedValue"
                  ] || "N/A"; // Formatted value

                // Append a new row to the table
                $("#inVoicesTable tbody").append(`
                <tr>
                    <td>${date}</td>
                    <td>${invoiceNo}</td>
                    <td>${store}</td>
                    <td>${value}</td>
                </tr>
            `);
              });
            } else {
              // If no invoices are found, display a message in the table
              $("#inVoicesTable tbody").append(`
                        <tr>
                            <td colspan="4" class="text-center">No invoices found for this shopper.</td>
                        </tr>
                    `);
            }
          },
          error: function (xhr) {
            console.error("Error fetching invoices:", xhr);
          },
        });
      }

      function showShopperProfilePage() {
        shopperDetailsSection.classList.add("d-none");
        document.getElementById("shopper-profile").classList.remove("d-none");
      }

      function findShoppers() {
        let phoneNumber = $("#phoneNumber").val().trim();
        let nationalId = $("#nationalId").val().trim();

        let messageContainer = $("#message"); // Target the message display area

        // Clear previous messages
        messageContainer.text("");
        // Validate inputs: Only numbers allowed
        let numberPattern = /^[0-9]+$/;

        if (phoneNumber && !numberPattern.test(phoneNumber)) {
          messageContainer
            .text("Phone Number should contain only numbers.")
            .css("color", "red");
          return;
        }

        if (nationalId && !numberPattern.test(nationalId)) {
          messageContainer
            .text("National ID should contain only numbers.")
            .css("color", "red");
          return;
        }
        //validates fields are not empty
        if (!phoneNumber && !nationalId) {
          messageContainer
            .text("Please enter either Phone Number or National ID.")
            .css("color", "red");
          return;
        }

        let filterQuery = [];

        if (phoneNumber) {
          filterQuery.push(`contains(blser_mobilenumber,'${phoneNumber}')`);
        }
        if (nationalId) {
          filterQuery.push(`contains(blser_idnumber,'${nationalId}')`);
        }

        let query =
          filterQuery.length > 0 ? `?$filter=${filterQuery.join(" and ")}` : "";

        $.ajax({
          type: "GET",
          url:
            parent.Xrm.Utility.getGlobalContext().getClientUrl() +
            `/api/data/v9.1/blser_shopperses${query}`,
          async: true,
          headers: {
            "OData-MaxVersion": "4.0",
            "OData-Version": "4.0",
            "Content-Type": "application/json; charset=utf-8",
            Accept: "application/json",
            Prefer: "odata.include-annotations=*",
          },
          success: function (data) {
            if (data.value.length === 0) {
              showShopperNotFoundMessage();
            } else {
              if ($.fn.DataTable.isDataTable("#shopperTable")) {
                $("#shopperTable").DataTable().destroy();
              }
              let tableBody = $("#shopperTable tbody");
              tableBody.empty(); // Clear existing data

              // Loop through the response data and extract required fields
              data.value.forEach((shopper) => {
                let row = `
                        <tr>
                            <td data-name="shopper_fullname">${
                              shopper.blser_fullname || "N/A"
                            }</td>
                            <td>${shopper.blser_mobilenumber || "N/A"}</td>
                            <td>${shopper.blser_idnumber || "N/A"}</td>
                            <td>${
                              shopper[
                                "blser_dateofbirth@OData.Community.Display.V1.FormattedValue"
                              ] || "N/A"
                            }</td>
                            <td>
                                <button class="main-btn create-invoice" data-id="${
                                  shopper.blser_shoppersid
                                }">
                                    <span>
                                        <svg id="vuesax_linear_add-square" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                                            <g id="add-square">
                                                <path id="Vector" d="M0,0H5.333" transform="translate(5.333 8)" fill="none" stroke="#231a3e" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"/>
                                                <path id="Vector-2" d="M0,5.333V0" transform="translate(8 5.333)" fill="none" stroke="#231a3e" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"/>
                                                <path id="Vector-3" d="M4.667,13.333h4c3.333,0,4.667-1.333,4.667-4.667v-4C13.333,1.333,12,0,8.667,0h-4C1.333,0,0,1.333,0,4.667v4C0,12,1.333,13.333,4.667,13.333Z" transform="translate(1.333 1.333)" fill="none" stroke="#231a3e" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"/>
                                            </g>
                                        </svg>
                                        Invoice
                                    </span>
                                </button>
                                <a href="#" class="normal-link view-profile" data-id="${
                                  shopper.blser_shoppersid
                                }">View Profile</a>
                            </td>
                        </tr>
                    `;
                tableBody.append(row);
              });
              ShowShoppersResult();
            }
          },
          error: function (xhr) {
            console.error("Error fetching data:", xhr);
          },
        });
      }
      function clearFindShopperForm() {
        document.getElementById("phoneNumber").value = "";
        document.getElementById("nationalId").value = "";
        document.getElementById("message").innerHTML = "";
        document.getElementById("shopper-not-found-message").innerHTML = "";
      }
      function ShowFindShopper() {
        clearFindShopperForm();
        shopperDetailsSection.classList.add("d-none");
        findShopperSection.classList.remove("d-none");
      }
      function ShowFindShopperFromShopperProfile() {
        clearFindShopperForm();
        document.getElementById("shopper-profile").classList.add("d-none");
        findShopperSection.classList.remove("d-none");
      }

      function CreateNewInvoiceFromShopperProfile() {
        document.getElementById("shopper-profile").classList.add("d-none");
        document.getElementById("new-invoice").classList.remove("d-none");
      }
      function registerNewShopper() {
        shopperDetailsSection.classList.add("d-none");
        document.getElementById("shopper-not-found").classList.remove("d-none");
      }

      function ShowShoppersResult() {
        findShopperSection.classList.add("d-none");
        shopperDetailsSection.classList.remove("d-none");
        initializeDataTable("#shopperTable");
        initiateInvoicesBtns = document.querySelectorAll(".create-invoice");

        initiateInvoicesBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            // get the data-id
            showShopperCreateInvoice(btn);
          });
        });
      }

      initiateInvoicesBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          shopperDetailsSection.classList.add("d-none");
          newInvoiceSection.classList.remove("d-none");
        });
      });

      function showShopperCreateInvoice(btn) {
        console.log(btn);
        // Get the closest table row
        let row = btn.closest("tr");

        // Extract shopper ID and full name
        let shopperId = btn.getAttribute("data-id");
        let shopperFullname = row.querySelector(
          '[data-name="shopper_fullname"]'
        ).textContent;
         prepareInvoiceFormValues(shopperId, shopperFullname, shopperDetailsSection, newInvoiceSection);
      }
      
      function prepareInvoiceFormValues(shopperId, shopperFullname, section2Hide, section2Display)
      {
        let newInvoiceFor = document.getElementsByClassName(
          "shopper-name-new-invoice"
        );
        console.log(newInvoiceFor);
        // Store values
        shopperIdd = shopperId;
        newInvoiceFor[0].textContent = shopperFullname;
        section2Hide.classList.add("d-none");
        section2Display.classList.remove("d-none");
        console.log("Shopper ID:", shopperIdd);
        console.log("Shopper Fullname:", shopperFullname);
        // populate the mall dropdown
        getAllMalls();
        // populate the raffle dropdown
        getAllRaffles();
      }
      function showShopperNotFoundMessage() {
        let shopperNotFoundMessage = $("#shopper-not-found-message");

        shopperNotFoundMessage.html(`
            <div class="d-flex align-items-center text-warning">
                <span class="me-2">
                    <svg id="info-circle" xmlns="http://www.w3.org/2000/svg" width="24" height="27" viewBox="0 0 24 27">
                        <path id="Vector" d="M10,23c5.5,0,10-5.175,10-11.5S15.5,0,10,0,0,5.175,0,11.5,4.5,23,10,23Z"
                            transform="translate(2 2)" fill="none" stroke="#c77b30" stroke-linecap="round"
                            stroke-linejoin="round" stroke-width="1.5"/>
                        <path id="Vector-2" data-name="Vector" d="M0,0V5" transform="translate(12 9.263)" fill="none"
                            stroke="#c77b30" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/>
                        <path id="Vector-3" data-name="Vector" d="M0,0H.009" transform="translate(11.995 18)" fill="none"
                            stroke="#c77b30" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                        <path id="Vector-4" data-name="Vector" d="M0,0H24V27H0Z" fill="none" opacity="0"/>
                    </svg>
                </span>
                <span>No user found with these info. Do you want to register a new shopper?</span>
            </div>
            <div class="mt-2">
                <a href="#" id="createShopper" class="main-link d-flex align-items-center">
                    <span class="me-1">
                        <svg id="vuesax_linear_add-square" data-name="vuesax/linear/add-square" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                            <g id="add-square">
                                <path id="Vector" d="M0,0H5.333" transform="translate(5.333 8)" fill="none"
                                    stroke="#231a3e" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"/>
                                <path id="Vector-2" data-name="Vector" d="M0,5.333V0" transform="translate(8 5.333)" fill="none"
                                    stroke="#231a3e" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"/>
                                <path id="Vector-3" data-name="Vector" d="M4.667,13.333h4c3.333,0,4.667-1.333,4.667-4.667v-4C13.333,1.333,12,0,8.667,0h-4C1.333,0,0,1.333,0,4.667v4C0,12,1.333,13.333,4.667,13.333Z"
                                    transform="translate(1.333 1.333)" fill="none" stroke="#231a3e" stroke-linecap="round"
                                    stroke-linejoin="round" stroke-width="1.2"/>
                                <path id="Vector-4" data-name="Vector" d="M0,0H16V16H0Z" fill="none" opacity="0"/>
                            </g>
                        </svg>
                    </span>
                    <span>Register New Shopper</span>
                </a>
            </div>
        `);

        // Add click event listener for createShopper button
        document
          .getElementById("createShopper")
          .addEventListener("click", () => {
            findShopperSection.classList.add("d-none");
            document
              .getElementById("shopper-not-found")
              .classList.remove("d-none");
          });
      }

      // Supraa 10/2/2025
      async function createPurshaseInvoice(shopperId) {
        console.log("Creating Invoice for Shopper ID:", shopperId);

        // Get input values
        const invoiceNumber = document
          .getElementById("invoiceNumber")
          .value.trim();
        const store = document.getElementById("store").value.trim();
        const mall = document.getElementById("mall").value.trim();
        const raffle = document.getElementById("raffle").value.trim();
        const purchaseDate = document
          .getElementById("purshaseDate")
          .value.trim();
        let invoicePrice = document.getElementById("invoicePrice").value.trim();

        // Validation
        const errors = [];
        if (!invoiceNumber) errors.push("Invoice Number is required.");
        if (!mall) errors.push("Please select a mall.");
        if (!store) errors.push("Please select a store.");
        if (!raffle) errors.push("Please select a raffle.");
        if (!purchaseDate) errors.push("Purchase Date is required.");
        if (!invoicePrice || isNaN(parseFloat(invoicePrice))) {
          errors.push("Invoice Price must be a valid number.");
        }

        // Show errors if any
        if (errors.length > 0) {
          Swal.fire({
            icon: "error",
            title: "Validation Errors",
            html: `<ul style="text-align:left;">${errors
              .map((err) => `<li>${err}</li>`)
              .join("")}</ul>`,
          });
          return true; // Return true indicating there are errors
        }

        // Format the invoice price as a number
        invoicePrice = parseFloat(invoicePrice);

        // Construct the record
        const record = {
          blser_invoicenumber: invoiceNumber, // Text
          "blser_ShoppingStore@odata.bind": `/blser_stores(${store})`, // Lookup
          "blser_Shopper@odata.bind": `/blser_shopperses(${shopperId})`, // Lookup
          blser_dateofpurchase: new Date(purchaseDate).toISOString(), // Date Time
          blser_amount: Number(parseFloat(invoicePrice).toFixed(4)), // Currency
          "blser_ShoppingMall@odata.bind": `/blser_malls(${mall})`, // Lookup
          "blser_Raffle@odata.bind": `/blser_raffles(${raffle})`, // Lookup
        };

        console.log("Record: ", record);

        try {
          const result = await parent.Xrm.WebApi.createRecord(
            "blser_purchaseinvoice",
            record
          );
          const newId = result.id;
          Swal.fire({
            icon: "success",
            title: "Success!",
            text: "Purchase Invoice created successfully!",
            customClass: {
              icon: "swal-icon-fix",
            },
            // footer: `Invoice ID: ${newId}`,
          });
          return false; // Return false indicating no errors
        } catch (error) {
          console.error("Error creating Purchase Invoice:", error.message);
          Swal.fire({
            icon: "error",
            title: "Error",
            text: `Failed to create Purchase Invoice: ${error.message}`,
            customClass: {
              icon: "swal-icon-fix",
            },
          });
          return true; // Return true indicating there was an error
        }
      }

      async function getAllRaffles() {
        $.ajax({
          type: "GET",
          url:
            parent.Xrm.Utility.getGlobalContext().getClientUrl() +
            "/api/data/v9.1/blser_raffles?$select=blser_raffleid,blser_name",
          async: true,
          headers: {
            "OData-MaxVersion": "4.0",
            "OData-Version": "4.0",
            "Content-Type": "application/json; charset=utf-8",
            Accept: "application/json",
            Prefer: "odata.include-annotations=*",
          },
          success: function (data, textStatus, xhr) {
            var results = data.value; // Extract the value array
            console.log("Fetched raffles:", results);

            // Select the raffle dropdown
            const raffleDropdown = document.getElementById("raffle");

            // Clear existing options
            raffleDropdown.innerHTML = `<option selected>Choose a Raffle</option>`;

            // Populate dropdown with fetched raffle data
            for (var i = 0; i < results.length; i++) {
              var result = results[i];
              var raffleId = result["blser_raffleid"]; // Raffle ID (GUID)
              var raffleName = result["blser_name"]; // Raffle Name

              // Create a new option element
              var option = document.createElement("option");
              option.value = raffleId; // Use raffle ID as the value
              option.textContent = raffleName; // Use raffle name as the text

              // Append the option to the dropdown
              raffleDropdown.appendChild(option);
            }
          },
          error: function (xhr, textStatus, errorThrown) {
            console.error("Error fetching raffles:", xhr);
          },
        });
      }

      async function getAllMalls() {
        const mallDropdown = document.getElementById("mall"); // Select the mall dropdown

        // Clear existing options
        mallDropdown.innerHTML = `<option selected value="">Choose a Mall</option>`;

        parent.Xrm.WebApi.retrieveMultipleRecords(
          "blser_mall",
          "?$select=blser_mallid,blser_name"
        ).then(
          function success(results) {
            console.log("Fetched malls:", results);

            // Populate dropdown with retrieved mall data
            for (let i = 0; i < results.entities.length; i++) {
              const result = results.entities[i];
              const mallId = result["blser_mallid"]; // Guid
              const mallName = result["blser_name"]; // Text

              // Create a new option element
              const option = document.createElement("option");
              option.value = mallId; // Use mall ID as the value
              option.textContent = mallName; // Use mall name as the text

              // Append the option to the dropdown
              mallDropdown.appendChild(option);
            }
          },
          function (error) {
            console.error("Error fetching malls:", error.message);
          }
        );
      }

      // Function to get and populate stores based on selected mall
      async function getStoresByMall(mallId) {
        const storeDropdown = document.getElementById("store");

        if (!mallId) {
          // Clear the store dropdown if no mall is selected
          storeDropdown.innerHTML = `<option selected>Choose a Store</option>`;
          return;
        }

        // Disable the dropdown and show a loading text
        storeDropdown.innerHTML = `<option selected>Loading stores...</option>`;
        storeDropdown.disabled = true;

        // Record the start time to ensure at least 1 second of loading
        const startTime = Date.now();

        $.ajax({
          type: "GET",
          url:
            parent.Xrm.Utility.getGlobalContext().getClientUrl() +
            "/api/data/v9.1/blser_stores?$select=blser_storeid,blser_name,_blser_mall_value",
          async: true,
          headers: {
            "OData-MaxVersion": "4.0",
            "OData-Version": "4.0",
            "Content-Type": "application/json; charset=utf-8",
            Accept: "application/json",
            Prefer: "odata.include-annotations=*",
          },
          success: function (data, textStatus, xhr) {
            const results = data.value; // Fetch results from data
            console.log("Fetched stores:", results);

            // Filter stores by selected mall
            const filteredStores = results.filter(
              (store) => store["_blser_mall_value"] === mallId
            );

            // Function to update the dropdown after at least 1 second
            function updateDropdown() {
              // Clear existing options
              storeDropdown.innerHTML = `<option selected>Choose a Store</option>`;

              // Populate dropdown with filtered store data
              for (let i = 0; i < filteredStores.length; i++) {
                const result = filteredStores[i];
                const storeId = result["blser_storeid"]; // Store ID (GUID)
                const storeName = result["blser_name"]; // Store Name

                // Create a new option element
                const option = document.createElement("option");
                option.value = storeId; // Use store ID as the value
                option.textContent = storeName; // Use store name as the text

                // Append the option to the dropdown
                storeDropdown.appendChild(option);
              }

              // Re-enable dropdown after loading is complete
              storeDropdown.disabled = false;
            }

            // Ensure the loading stays for at least 1 second
            const elapsedTime = Date.now() - startTime;
            const remainingTime = 1000 - elapsedTime; // Minimum 1 second

            if (remainingTime > 0) {
              setTimeout(updateDropdown, remainingTime);
            } else {
              updateDropdown();
            }
          },
          error: function (xhr, textStatus, errorThrown) {
            console.error("Error fetching stores:", xhr);
            storeDropdown.innerHTML = `<option selected>Error loading stores</option>`;
            storeDropdown.disabled = false;
          },
        });
      }
   
   </script>
  </body>
</html>
